# 用户管理中心 (SUT) 测试文档
## 项目概述
### 项目名称：用户管理中心 (SUT)
**技术栈**：Django + Django REST Framework + Vue 3
**项目类型**：前后端分离的用户管理系统
**开发状态**：基础功能已完成，可进行测试

### 系统架构
#### 后端架构
* 框架：Django 4.2.7 + Django REST Framework
* 数据库：SQLite（开发环境）
* 认证方式：Token 认证
* 主要功能模块：用户认证、用户管理、API 接口

#### 前端架构
* 框架：Vue 3 + Vue Router + Pinia
* HTTP 客户端：Axios
* 构建工具：Vue CLI
* 主要功能模块：用户界面、状态管理、路由控制

#### 功能清单
##### 1. 用户认证功能
* ✅ 用户注册
* ✅ 用户登录
* ✅ 用户退出登录
* ✅ Token 认证机制
* ✅ 路由权限控制

##### 2. 用户管理功能
* ✅ 个人资料查看
* ✅ 个人资料编辑
* ✅ 用户信息展示
* ✅ 头像显示（基于用户名首字母）

##### 3. 管理员功能
* ✅ Django 管理员界面
* ✅ 用户数据管理
* ✅ 超级用户权限

#### 测试环境配置
##### 后端环境启动
```bash

# 激活虚拟环境
cd D:\Codes\PythonCodes\sut_demo
.\venv\Scripts\activate

# 启动 Django 开发服务器
python manage.py runserver
访问地址：http://127.0.0.1:8000
```
##### 前端环境启动
```bash

# 进入前端目录
cd frontend

# 启动 Vue 开发服务器
npm run serve
访问地址：http://localhost:8080
```
##### API 接口测试指南
###### 1. 用户注册接口
**端点**：`POST /api/register/`

**测试数据：**
```
json
{
  "username": "testuser",
  "email": "test@example.com",
  "password": "testpass123",
  "password_confirm": "testpass123",
  "phone": "13800138000"
}
```
**预期响应：**

* 成功：201 Created，返回用户信息和 token

* 失败：400 Bad Request，返回错误信息

###### 2. 用户登录接口
**端点**：`POST /api/login/`

**测试数据：**
```
json
{
  "username": "testuser",
  "password": "testpass123"
}
```
**预期响应：**
* 成功：200 OK，返回用户信息和 token

* 失败：400 Bad Request，返回错误信息

###### 3. 用户资料接口
**端点**：`GET /api/profile/`

**请求头：**
```
text
Authorization: Token your_token_here
Content-Type: application/json
```
**预期响应：**
* 成功：200 OK，返回用户详细信息

* 未认证：401 Unauthorized

###### 4. 更新资料接口
**端点**：`PUT /api/profile/`

**测试数据：**
```
json
{
  "email": "newemail@example.com",
  "phone": "13900139000",
  "first_name": "张",
  "last_name": "三"
}
```

**预期响应：**

  * 成功：200 OK，返回更新后的用户信息

  * 未认证：401 Unauthorized

  * 失败：400 Bad Request，返回错误信息

###### 5. 退出登录接口
**端点**：`POST /api/logout/`

**预期响应：**
* 成功：200 OK，返回退出成功消息

* 未认证：401 Unauthorized

#### 前端功能测试用例
##### 测试用例 1：用户注册流程
**测试步骤：**

1. 访问 http://localhost:8080/register

2. 填写注册表单：

   * 用户名：testuser001

   * 邮箱：test001@example.com

   * 手机号：13800138001

   * 密码：testpass123

   * 确认密码：testpass123

3. 点击"注册"按钮

**预期结果：**

* 注册成功，自动跳转到个人资料页面

* 页面显示欢迎信息和新用户信息

* 在浏览器 localStorage 中保存 token

##### 测试用例 2：用户登录流程
**测试步骤：**

1. 访问 http://localhost:8080/login

2. 填写登录表单：

   * 用户名：testuser001

   * 密码：testpass123

3. 点击"登录"按钮

**预期结果：**

* 登录成功，跳转到个人资料页面

* 页面显示用户信息和导航栏

* 浏览器 localStorage 中有有效的 token

##### 测试用例 3：个人资料管理
**测试步骤：**

1. 登录成功后，在个人资料页面

2. 修改以下信息：

   * 邮箱：updated@example.com

   * 手机号：13900139001

   * 姓：李

   * 名：四

3. 点击"更新资料"按钮

**预期结果：**

* 显示"资料更新成功"提示

* 页面显示更新后的信息

* 刷新页面后信息保持更新状态

##### 测试用例 4：退出登录功能
**测试步骤：**

1. 在个人资料页面

2. 点击"退出登录"按钮

**预期结果：**

* 退出成功，跳转到登录页面

* localStorage 中的 token 被清除

* 再次访问 /profile 会自动跳转到登录页面

##### 测试用例 5：权限控制测试
**测试步骤：**

1. 未登录状态下直接访问 http://localhost:8080/profile

2. 登录后访问 http://localhost:8080/login

预期结果：

* 未登录访问受限页面时自动跳转到登录页

* 已登录用户访问登录页时自动跳转到个人资料页

##### 测试用例 6：管理员界面访问
**测试步骤：**

1. 访问 http://127.0.0.1:8000/admin

2. 使用超级用户账号登录

**预期结果：**

* 成功进入 Django 管理员界面

* 可以看到用户管理功能

* 能够查看和编辑用户数据

###### 创建测试用超级用户：

```bash
python manage.py createsuperuser
```
按提示输入用户名、邮箱和密码。

##### 错误场景测试
###### 测试用例 7：注册异常情况
1. 密码不匹配：注册时两次密码输入不一致

   * 预期： 显示"两次密码输入不一致"错误 
2. 用户已存在：使用已注册的用户名注册

* 预期： 显示用户已存在错误

3. 必填字段缺失：不填写必填字段提交

   * 预期： 显示相应字段的验证错误
###### 测试用例 8：登录异常情况
1. 错误密码：输入错误的密码

   * 预期： 显示"用户名或密码错误"

2. 不存在的用户：输入不存在的用户名

    * 预期： 显示"用户名或密码错误"

###### 测试用例 9：Token 失效测试
1. 手动删除 localStorage 中的 token

2. 刷新个人资料页面

   * 预期： 自动跳转到登录页面

##### 性能测试要点
###### 接口响应时间
* 注册接口：应在 2 秒内完成

* 登录接口：应在 1 秒内完成

* 资料获取接口：应在 500ms 内完成

###### 前端加载性能
* 页面首次加载：应在 3 秒内完成

* 页面切换：应在 1 秒内完成

* 表单提交：应有明确的加载状态提示

###### 兼容性测试
###### 浏览器兼容性
* ✅ Chrome 90+
* ✅ Firefox 88+
* ✅ Edge 90+
* ✅ Safari 14+
###### 屏幕尺寸兼容性
* ✅ 桌面端（1200px+）

* ✅ 平板端（768px-1199px）

* ✅ 移动端（320px-767px）

###### 数据验证要点
###### 用户数据验证
* 用户名：3-20个字符，只允许字母、数字、下划线

* 邮箱：必须符合邮箱格式

* 手机号：可选，如果提供必须为有效格式

* 密码：最少6位字符

###### 业务逻辑验证
* 注册后自动登录

* 登录状态持久化

* 退出登录清除所有认证信息

* 权限控制正确工作

##### 安全测试要点
###### 认证安全
* Token 认证机制正常工作

* 未认证请求被正确拒绝

* 退出登录后 token 失效

###### 数据安全
* 密码在传输过程中加密

* 敏感信息不在前端暴露

* API 接口有适当的权限控制

#### 已知问题
1. 头像功能：当前使用用户名首字母作为头像，真实的图片上传功能尚未实现

2. 密码重置：忘记密码功能尚未实现

3. 邮箱验证：注册邮箱验证功能尚未实现

4. 角色管理：用户角色变更功能仅限于管理员界面

#### 测试报告模板
###### 测试执行记录
```
测试用例	执行结果	问题描述	严重程度
TC-01 用户注册	✅ 通过	-	-
TC-02 用户登录	✅ 通过	-	-
TC-03 资料管理	✅ 通过	-	-
TC-04 退出登录	✅ 通过	-	-
```
###### 问题汇总
```
问题ID	问题描述	重现步骤	预期结果	实际结果	优先级
-	暂无重大问题	-	-	-	-
```
**文档版本：** v1.0\
**最后更新：** 2025-10-18\
**测试负责人：** 待指定

